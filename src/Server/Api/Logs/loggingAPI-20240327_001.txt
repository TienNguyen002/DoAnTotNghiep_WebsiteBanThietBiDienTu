2024-03-27 16:43:08.411 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-03-27 16:43:08.446 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-03-27 16:43:08.453 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-03-27 16:44:06.097 +07:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [DeviceWeb];
2024-03-27 16:44:06.154 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [DeviceWeb] SET READ_COMMITTED_SNAPSHOT ON;
END;
2024-03-27 16:44:06.166 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-03-27 16:44:06.218 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Branches] PRIMARY KEY ([Id])
);
2024-03-27 16:44:06.221 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2024-03-27 16:44:06.223 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Colors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Colors] PRIMARY KEY ([Id])
);
2024-03-27 16:44:06.225 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2024-03-27 16:44:06.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Statuses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Statuses] PRIMARY KEY ([Id])
);
2024-03-27 16:44:06.229 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Tags] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Tags] PRIMARY KEY ([Id])
);
2024-03-27 16:44:06.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Phone] nvarchar(max) NOT NULL,
    [Password] nvarchar(16) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Roles_Users] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE
);
2024-03-27 16:44:06.233 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Orders] (
    [Id] int NOT NULL IDENTITY,
    [DateOrder] datetime NOT NULL,
    [Quantity] int NOT NULL,
    [TotalPrice] int NOT NULL,
    [StatusId] int NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Orders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Statuses_Orders] FOREIGN KEY ([StatusId]) REFERENCES [Statuses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Users_Orders] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2024-03-27 16:44:06.237 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Products] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    [ImageUrl] nvarchar(1000) NULL,
    [Description] nvarchar(max) NOT NULL,
    [Specification] nvarchar(max) NOT NULL,
    [Amount] int NOT NULL,
    [Status] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Price] int NULL,
    [OrPrice] int NOT NULL,
    [CategoryId] int NOT NULL,
    [BranchId] int NOT NULL,
    [TagId] int NOT NULL,
    [OrderId] int NOT NULL,
    CONSTRAINT [PK_Products] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Branches_Products] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Categories_Products] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Orders_Products] FOREIGN KEY ([OrderId]) REFERENCES [Orders] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Tags_Products] FOREIGN KEY ([TagId]) REFERENCES [Tags] ([Id]) ON DELETE CASCADE
);
2024-03-27 16:44:06.240 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Comments] (
    [Id] int NOT NULL IDENTITY,
    [Detail] nvarchar(max) NOT NULL,
    [CommentDate] datetime NOT NULL,
    [ProductId] int NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Comments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Comments_Products] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Comments_Users] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2024-03-27 16:44:06.242 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Images] (
    [Id] int NOT NULL IDENTITY,
    [ImageUrl] nvarchar(1000) NOT NULL,
    [ProductId] int NOT NULL,
    CONSTRAINT [PK_Images] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Images_Products] FOREIGN KEY ([ProductId]) REFERENCES [Products] ([Id]) ON DELETE CASCADE
);
2024-03-27 16:44:06.244 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductColors] (
    [ColorsId] int NOT NULL,
    [ProductsId] int NOT NULL,
    CONSTRAINT [PK_ProductColors] PRIMARY KEY ([ColorsId], [ProductsId]),
    CONSTRAINT [FK_ProductColors_Colors_ColorsId] FOREIGN KEY ([ColorsId]) REFERENCES [Colors] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductColors_Products_ProductsId] FOREIGN KEY ([ProductsId]) REFERENCES [Products] ([Id]) ON DELETE CASCADE
);
2024-03-27 16:44:06.246 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Comments_ProductId] ON [Comments] ([ProductId]);
2024-03-27 16:44:06.248 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Comments_UserId] ON [Comments] ([UserId]);
2024-03-27 16:44:06.249 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Images_ProductId] ON [Images] ([ProductId]);
2024-03-27 16:44:06.250 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_StatusId] ON [Orders] ([StatusId]);
2024-03-27 16:44:06.252 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Orders_UserId] ON [Orders] ([UserId]);
2024-03-27 16:44:06.254 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductColors_ProductsId] ON [ProductColors] ([ProductsId]);
2024-03-27 16:44:06.256 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_BranchId] ON [Products] ([BranchId]);
2024-03-27 16:44:06.257 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_CategoryId] ON [Products] ([CategoryId]);
2024-03-27 16:44:06.260 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_OrderId] ON [Products] ([OrderId]);
2024-03-27 16:44:06.262 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Products_TagId] ON [Products] ([TagId]);
2024-03-27 16:44:06.264 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_RoleId] ON [Users] ([RoleId]);
2024-03-27 16:44:06.369 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.399 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.402 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.404 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.405 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.407 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.408 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.410 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.411 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.412 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.414 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.492 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Categories] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9),
(@p20, @p21, 10)) AS i ([Name], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name], [UrlSlug])
VALUES (i.[Name], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
2024-03-27 16:44:06.505 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.507 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.509 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.510 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.522 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Colors] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3)) AS i ([Name], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name], [UrlSlug])
VALUES (i.[Name], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
2024-03-27 16:44:06.528 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.529 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.531 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.533 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.544 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Statuses] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3)) AS i ([Name], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name], [UrlSlug])
VALUES (i.[Name], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
2024-03-27 16:44:06.549 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]
        WHERE [r].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.551 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]
        WHERE [r].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.560 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Roles] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1)) AS i ([Name], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name], [UrlSlug])
VALUES (i.[Name], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
2024-03-27 16:44:06.565 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tags] AS [t]
        WHERE [t].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.574 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Tags] ([Name], [UrlSlug])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-03-27 16:44:06.578 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Branches] AS [b]
        WHERE [b].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.580 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Branches] AS [b]
        WHERE [b].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.592 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Branches] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1)) AS i ([Name], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name], [UrlSlug])
VALUES (i.[Name], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
2024-03-27 16:44:06.596 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.598 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.599 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.600 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.601 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.626 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 16), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 16), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 16), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 4000), @p21='?' (Size = 4000), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (Size = 16), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (Size = 4000), @p28='?' (Size = 4000), @p29='?' (Size = 4000), @p30='?' (Size = 4000), @p31='?' (Size = 16), @p32='?' (Size = 4000), @p33='?' (DbType = Int32), @p34='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, 4)) AS i ([Address], [Email], [Name], [Password], [Phone], [RoleId], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Address], [Email], [Name], [Password], [Phone], [RoleId], [UrlSlug])
VALUES (i.[Address], i.[Email], i.[Name], i.[Password], i.[Phone], i.[RoleId], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
2024-03-27 16:44:06.633 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.635 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.636 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:06.688 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 1000), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (Size = 4000), @p16='?' (Size = 1000), @p17='?' (Size = 4000), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Size = 4000), @p22='?' (DbType = Int32), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Size = 4000), @p28='?' (Size = 1000), @p29='?' (Size = 4000), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (Size = 4000), @p34='?' (DbType = Int32), @p35='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Products] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, 0),
(@p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 1),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 2)) AS i ([Amount], [BranchId], [CategoryId], [Description], [ImageUrl], [Name], [OrPrice], [OrderId], [Price], [Specification], [TagId], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [BranchId], [CategoryId], [Description], [ImageUrl], [Name], [OrPrice], [OrderId], [Price], [Specification], [TagId], [UrlSlug])
VALUES (i.[Amount], i.[BranchId], i.[CategoryId], i.[Description], i.[ImageUrl], i.[Name], i.[OrPrice], i.[OrderId], i.[Price], i.[Specification], i.[TagId], i.[UrlSlug])
OUTPUT INSERTED.[Id], INSERTED.[Status], i._Position;
2024-03-27 16:44:06.702 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Contexts.DeviceWebDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Products". The conflict occurred in database "DeviceWeb", table "dbo.Orders", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:f034578a-4563-46b4-baa3-cc3e415e56e5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Products". The conflict occurred in database "DeviceWeb", table "dbo.Orders", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:f034578a-4563-46b4-baa3-cc3e415e56e5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-03-27 16:44:06.709 +07:00 [ERR] Could not insert data into database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Products". The conflict occurred in database "DeviceWeb", table "dbo.Orders", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:f034578a-4563-46b4-baa3-cc3e415e56e5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Infrastructure.Seeders.DataSeeder.AddProducts(IList`1 categories, IList`1 branches, IList`1 colors, IList`1 tags) in D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Infrastructure\Seeder\DataSeeder.cs:line 278
   at Infrastructure.Seeders.DataSeeder.Initialize() in D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Infrastructure\Seeder\DataSeeder.cs:line 30
   at Api.Extensions.WebApplicationExtensions.UseDataSeeder(IApplicationBuilder app) in D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Api\Extensions\WebApplicationExtensions.cs:line 98
2024-03-27 16:44:06.736 +07:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2024-03-27 16:44:06.794 +07:00 [INF] Now listening on: https://localhost:7249
2024-03-27 16:44:06.794 +07:00 [INF] Now listening on: http://localhost:5002
2024-03-27 16:44:06.809 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 16:44:06.810 +07:00 [INF] Hosting environment: Development
2024-03-27 16:44:06.811 +07:00 [INF] Content root path: D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Api
2024-03-27 16:44:13.157 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-03-27 16:44:13.205 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2024-03-27 16:44:13.332 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.363 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.367 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.368 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.370 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.371 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.372 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.374 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.375 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.377 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.379 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.380 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.394 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.396 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.398 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.399 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Colors] AS [c]
        WHERE [c].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.406 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.407 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.409 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.411 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Statuses] AS [s]
        WHERE [s].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.419 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]
        WHERE [r].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.421 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]
        WHERE [r].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.428 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tags] AS [t]
        WHERE [t].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.436 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Branches] AS [b]
        WHERE [b].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.438 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Branches] AS [b]
        WHERE [b].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.445 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.447 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.449 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.450 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.452 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.457 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.459 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.460 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__item_UrlSlug_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[UrlSlug] = @__item_UrlSlug_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-03-27 16:44:13.618 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Branches] ([Name], [UrlSlug])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
INSERT INTO [Categories] ([Name], [UrlSlug])
OUTPUT INSERTED.[Id]
VALUES (@p2, @p3);
MERGE [Colors] USING (
VALUES (@p4, @p5, 0),
(@p6, @p7, 1),
(@p8, @p9, 2),
(@p10, @p11, 3)) AS i ([Name], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name], [UrlSlug])
VALUES (i.[Name], i.[UrlSlug])
OUTPUT INSERTED.[Id], i._Position;
INSERT INTO [Tags] ([Name], [UrlSlug])
OUTPUT INSERTED.[Id]
VALUES (@p12, @p13);
2024-03-27 16:44:13.637 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (Size = 4000), @p18='?' (Size = 1000), @p19='?' (Size = 4000), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (Size = 4000), @p24='?' (DbType = Int32), @p25='?' (Size = 4000), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (Size = 4000), @p30='?' (Size = 1000), @p31='?' (Size = 4000), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (Size = 4000), @p36='?' (DbType = Int32), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (Size = 4000), @p42='?' (Size = 1000), @p43='?' (Size = 4000), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (Size = 4000), @p48='?' (DbType = Int32), @p49='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Products] USING (
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, 0),
(@p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, 1),
(@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, 2)) AS i ([Amount], [BranchId], [CategoryId], [Description], [ImageUrl], [Name], [OrPrice], [OrderId], [Price], [Specification], [TagId], [UrlSlug], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [BranchId], [CategoryId], [Description], [ImageUrl], [Name], [OrPrice], [OrderId], [Price], [Specification], [TagId], [UrlSlug])
VALUES (i.[Amount], i.[BranchId], i.[CategoryId], i.[Description], i.[ImageUrl], i.[Name], i.[OrPrice], i.[OrderId], i.[Price], i.[Specification], i.[TagId], i.[UrlSlug])
OUTPUT INSERTED.[Id], INSERTED.[Status], i._Position;
2024-03-27 16:44:13.652 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Contexts.DeviceWebDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Products". The conflict occurred in database "DeviceWeb", table "dbo.Orders", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:7aaee9f9-b6ca-420d-a04a-47656627e75b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Products". The conflict occurred in database "DeviceWeb", table "dbo.Orders", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:7aaee9f9-b6ca-420d-a04a-47656627e75b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-03-27 16:44:13.673 +07:00 [ERR] Could not insert data into database
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint "FK_Orders_Products". The conflict occurred in database "DeviceWeb", table "dbo.Orders", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:7aaee9f9-b6ca-420d-a04a-47656627e75b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at Infrastructure.Seeders.DataSeeder.AddProducts(IList`1 categories, IList`1 branches, IList`1 colors, IList`1 tags) in D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Infrastructure\Seeder\DataSeeder.cs:line 278
   at Infrastructure.Seeders.DataSeeder.Initialize() in D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Infrastructure\Seeder\DataSeeder.cs:line 30
   at Api.Extensions.WebApplicationExtensions.UseDataSeeder(IApplicationBuilder app) in D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Api\Extensions\WebApplicationExtensions.cs:line 98
2024-03-27 16:44:13.701 +07:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2024-03-27 16:44:13.761 +07:00 [INF] Now listening on: https://localhost:7249
2024-03-27 16:44:13.762 +07:00 [INF] Now listening on: http://localhost:5002
2024-03-27 16:44:13.778 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-27 16:44:13.779 +07:00 [INF] Hosting environment: Development
2024-03-27 16:44:13.780 +07:00 [INF] Content root path: D:\Year4-Term2\DATN\DoAnTotNghiep_WebsiteBanThietBiDienTu\src\Server\Api
2024-03-27 16:44:21.395 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-03-27 16:44:21.429 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-03-27 16:44:21.430 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-03-27 16:44:21.474 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2024-03-27 16:44:21.475 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-03-27 16:44:21.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-03-27 16:44:21.479 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-03-27 16:44:21.488 +07:00 [INF] Applying migration '20240327094413_InitialCreate'.
2024-03-27 16:44:21.527 +07:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [UrlSlug] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Branches] PRIMARY KEY ([Id])
);
